!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.domtoimage=e():t.domtoimage=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){!function(e){"use strict";const n=function(){return{escape:function(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:t,mimeType:function(e){const n=t(e).toLowerCase();return function(){const t="application/font-woff";return{woff:t,woff2:t,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[n]||""},dataAsUrl:function(t,e){return"data:"+e+";base64,"+t},isDataUrl:function(t){return-1!==t.search(/^(data:)/)},canvasToBlob:function(t){return t.toBlob?new Promise((function(e){t.toBlob(e)})):function(t){return new Promise((function(e){const n=window.atob(t.toDataURL().split(",")[1]),r=n.length,o=new Uint8Array(r);for(let t=0;t<r;t++)o[t]=n.charCodeAt(t);e(new Blob([o],{type:"image/png"}))}))}(t)},resolveUrl:function(t,e){const n=document.implementation.createHTMLDocument(),r=n.createElement("base");n.head.appendChild(r);const o=n.createElement("a");return n.body.appendChild(o),r.href=e,o.href=t,o.href},getAndEncode:function(t){const e=3e4;c.impl.options.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());return new Promise((function(n){const r=new XMLHttpRequest;let o;if(r.onreadystatechange=function(){if(4!==r.readyState)return;if(200!==r.status)return void(o?n(o):i("cannot fetch resource: "+t+", status: "+r.status));const e=new FileReader;e.onloadend=function(){const t=e.result.split(/,/)[1];n(t)},e.readAsDataURL(r.response)},r.ontimeout=function(){o?n(o):i("timeout of "+e+"ms occured while fetching resource: "+t)},r.responseType="blob",r.timeout=e,c.impl.options.useCredentials&&(r.withCredentials=!0),r.open("GET",t,!0),r.send(),c.impl.options.imagePlaceholder){const t=c.impl.options.imagePlaceholder.split(/,/);t&&t[1]&&(o=t[1])}function i(t){console.error(t),n("")}}))},uid:function(){let t=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+t++}}(),delay:function(t){return function(e){return new Promise((function(n){setTimeout((function(){n(e)}),t)}))}},asArray:function(t){const e=[],n=t.length;for(let r=0;r<n;r++)e.push(t[r]);return e},escapeXhtml:function(t){return t.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(t){return"data:,"===t?Promise.resolve():new Promise((function(e,n){const r=new Image;c.impl.options.useCredentials&&(r.crossOrigin="use-credentials"),r.onload=function(){e(r)},r.onerror=n,r.src=t}))},width:function(t){const n=e(t,"border-left-width"),r=e(t,"border-right-width");return t.scrollWidth+n+r},height:function(t){const n=e(t,"border-top-width"),r=e(t,"border-bottom-width");return t.scrollHeight+n+r}};function t(t){const e=/\.([^\.\/]*?)(\?|$)/g.exec(t);return e?e[1]:""}function e(t,e){const n=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(n.replace("px",""))}}(),r=function(){const t=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(t,n,i){return function(){return!e(t)}()?Promise.resolve(t):Promise.resolve(t).then(r).then((function(e){let r=Promise.resolve(t);return e.forEach((function(t){r=r.then((function(e){return o(e,t,n,i)}))})),r}))},shouldProcess:e,impl:{readUrls:r,inline:o}};function e(e){return-1!==e.search(t)}function r(e){const r=[];let o;for(;null!==(o=t.exec(e));)r.push(o[1]);return r.filter((function(t){return!n.isDataUrl(t)}))}function o(t,e,r,o){return Promise.resolve(e).then((function(t){return r?n.resolveUrl(t,r):t})).then(o||n.getAndEncode).then((function(t){return n.dataAsUrl(t,n.mimeType(e))})).then((function(r){return t.replace(function(t){return new RegExp("(url\\(['\"]?)("+n.escape(t)+")(['\"]?\\))","g")}(e),"$1"+r+"$3")}))}}(),o=function(){return{resolveAll:function(){return t(document).then((function(t){return Promise.all(t.map((function(t){return t.resolve()})))})).then((function(t){return t.join("\n")}))},impl:{readAll:t}};function t(){return Promise.resolve(n.asArray(document.styleSheets)).then((function(t){const e=[];return t.forEach((function(t){if(t.hasOwnProperty("cssRules"))try{n.asArray(t.cssRules||[]).forEach(e.push.bind(e))}catch(e){console.log("Error while reading CSS rules from "+t.href,e.toString())}})),e})).then((function(t){return t.filter((function(t){return t.type===CSSRule.FONT_FACE_RULE})).filter((function(t){return r.shouldProcess(t.style.getPropertyValue("src"))}))})).then((function(e){return e.map(t)}));function t(t){return{resolve:function(){const e=(t.parentStyleSheet||{}).href;return r.inlineAll(t.cssText,e)},src:()=>t.style.getPropertyValue("src")}}}}(),i=function(){return{inlineAll:function e(o){return o instanceof Element?function(t){const e=t.style.getPropertyValue("background");return e?r.inlineAll(e).then((function(e){t.style.setProperty("background",e,t.style.getPropertyPriority("background"))})).then((function(){return t})):Promise.resolve(t)}(o).then((function(){return o instanceof HTMLImageElement?t(o).inline():Promise.all(n.asArray(o.childNodes).map((function(t){return e(t)})))})):Promise.resolve(o)},impl:{newImage:t}};function t(t){return{inline:function(e){return n.isDataUrl(t.src)?Promise.resolve():Promise.resolve(t.src).then(e||n.getAndEncode).then((function(e){return n.dataAsUrl(e,n.mimeType(t.src))})).then((function(e){return new Promise((function(n,r){t.onload=n,t.onerror=n,t.src=e}))}))}}}}(),u={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},c={toSvg:s,toPng:function(t,e){return a(t,e||{}).then((function(t){return t.toDataURL()}))},toJpeg:function(t,e){return a(t,e=e||{}).then((function(t){return t.toDataURL("image/jpeg",e.quality||1)}))},toBlob:function(t,e){return a(t,e||{}).then(n.canvasToBlob)},toPixelData:function(t,e){return a(t,e||{}).then((function(e){return e.getContext("2d").getImageData(0,0,n.width(t),n.height(t)).data}))},toCanvas:function(t,e){return a(t,e||{})},impl:{fontFaces:o,images:i,util:n,inliner:r,options:{}}};function s(t,e){return function(t){void 0===t.imagePlaceholder?c.impl.options.imagePlaceholder=u.imagePlaceholder:c.impl.options.imagePlaceholder=t.imagePlaceholder;void 0===t.cacheBust?c.impl.options.cacheBust=u.cacheBust:c.impl.options.cacheBust=t.cacheBust;void 0===t.useCredentials?c.impl.options.useCredentials=u.useCredentials:c.impl.options.useCredentials=t.useCredentials}(e=e||{}),Promise.resolve(t).then((function(t){return function t(e,r,o){return o||!r||r(e)?Promise.resolve(e).then((function(t){return t instanceof HTMLCanvasElement?n.makeImage(t.toDataURL()):t.cloneNode(!1)})).then((function(o){return function(e,r,o){const i=e.childNodes;return 0===i.length?Promise.resolve(r):function(e,n,r){let o=Promise.resolve();return n.forEach((function(n){o=o.then((function(){return t(n,r)})).then((function(t){t&&e.appendChild(t)}))})),o}(r,n.asArray(i),o).then((function(){return r}))}(e,o,r)})).then((function(t){return function(t,e){return e instanceof Element?Promise.resolve().then((function(){r=window.getComputedStyle(t),o=e.style,r.cssText?(o.cssText=r.cssText,function(t,e){e.font=t.font,e.fontFamily=t.fontFamily,e.fontFeatureSettings=t.fontFeatureSettings,e.fontKerning=t.fontKerning,e.fontSize=t.fontSize,e.fontStretch=t.fontStretch,e.fontStyle=t.fontStyle,e.fontVariant=t.fontVariant,e.fontVariantCaps=t.fontVariantCaps,e.fontVariantEastAsian=t.fontVariantEastAsian,e.fontVariantLigatures=t.fontVariantLigatures,e.fontVariantNumeric=t.fontVariantNumeric,e.fontVariationSettings=t.fontVariationSettings,e.fontWeight=t.fontWeight}(r,o)):function(t,e){n.asArray(t).forEach((function(n){e.setProperty(n,t.getPropertyValue(n),t.getPropertyPriority(n))}))}(r,o);var r,o})).then((function(){[":before",":after"].forEach((function(r){!function(r){const o=window.getComputedStyle(t,r),i=o.getPropertyValue("content");if(""===i||"none"===i)return;const u=n.uid(),c=e.getAttribute("class");c&&e.setAttribute("class",c+" "+u);const s=document.createElement("style");s.appendChild(function(t,e,r){const o="."+t+":"+e,i=r.cssText?function(t){const e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}(r):function(t){return n.asArray(t).map((function(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")})).join("; ")+";"}(r);return document.createTextNode(o+"{"+i+"}")}(u,r,o)),e.appendChild(s)}(r)}))})).then((function(){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value);t instanceof HTMLInputElement&&e.setAttribute("value",t.value)})).then((function(){if(!(e instanceof SVGElement))return;if(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),!(e instanceof SVGRectElement))return;["width","height"].forEach((function(t){const n=e.getAttribute(t);n&&e.style.setProperty(t,n)}))})).then((function(){return e})):e}(e,t)})):Promise.resolve()}(t,e.filter,!0)})).then((function(t){return e.postProcess&&e.postProcess(t),t})).then(l).then(f).then((function(t){e.bgcolor&&(t.style.backgroundColor=e.bgcolor);e.width&&(t.style.width=e.width+"px");e.height&&(t.style.height=e.height+"px");e.style&&Object.keys(e.style).forEach((function(n){t.style[n]=e.style[n]}));return t})).then((function(r){return function(t,e,r){return Promise.resolve(t).then((function(t){return t.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(t)})).then(n.escapeXhtml).then((function(t){return'<foreignObject x="0" y="0" width="100%" height="100%">'+t+"</foreignObject>"})).then((function(t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+r+'">'+t+"</svg>"})).then((function(t){return"data:image/svg+xml;charset=utf-8,"+t}))}(r,e.width||n.width(t),e.height||n.height(t))}))}function a(t,e){return s(t,e).then(n.makeImage).then(n.delay(100)).then((function(r){const o="number"!=typeof e.scale?1:e.scale,i=function(t,r){const o=document.createElement("canvas");if(o.width=(e.width||n.width(t))*r,o.height=(e.height||n.height(t))*r,e.bgcolor){const t=o.getContext("2d");t.fillStyle=e.bgcolor,t.fillRect(0,0,o.width,o.height)}return o}(t,o),u=i.getContext("2d");return r&&(u.scale(o,o),u.drawImage(r,0,0)),i}))}function l(t){return o.resolveAll().then((function(e){const n=document.createElement("style");return t.appendChild(n),n.appendChild(document.createTextNode(e)),t}))}function f(t){return i.inlineAll(t).then((function(){return t}))}t.exports=c}()}])}));
